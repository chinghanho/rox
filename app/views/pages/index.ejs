<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>rox</title>
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/form.css">
  <link rel="stylesheet" href="/css/button.css">
  <link rel="stylesheet" href="/css/open-iconic.css">
</head>
<body>

<div id="app" v-cloak>

  <div class="login-head"></div>

  <div class="panel panel-signin" v-if="!authenticated">
    <div class="panel-body">

      <h3>Sign in</h3>

      <p>Please enter your login name and password.</p>

      <div class="alert" v-if="error">
        {{ error.message }}
      </div>

      <form @submit="login">

        <div class="form-group">
          <label>login</label>
          <input type="text" class="form-control" v-model="user.login" tabindex="1">
        </div>

        <div class="form-group">
          <label>password</label>
          <input type="password" class="form-control" v-model="user.password" tabindex="2">
        </div>

        <div class="clearfix">
          <button type="submit" class="btn btn-reset pull-right" tabindex="3">Next ></button>
        </div>
      </form>
    </div>
  </div>
  <div v-if="authenticated">
    <div class="panel panel-chats clearfix">
      <div class="sidebar">
        <div class="head">
          <a href="#" class="btn btn-create-room" @click="createRoom">
            <span class="oi" data-glyph="plus" title="plus" aria-hidden="true"></span>
            Create room
          </a>

          <a href="#" class="btn btn-join-room" @click="joinRoom">
            <span class="oi" data-glyph="account-login" title="account-login" aria-hidden="true"></span>
            Join room
          </a>
        </div>
        <div class="items">
          <div class="item" :class="{ 'active': activeChatIndex === index }" v-for="(chat, index) in chats" @click="selectChat(index)">
            <div>{{ chat.uuid }}</div>
          </div>
        </div>
      </div>
      <div class="main">
        <div class="head" v-if="activeChat">
          Talking in {{ activeChat.uuid }}
        </div>

        <div class="body" v-if="activeChat" ref="messages">
          <div v-for="message in activeChat.messages" class="message">
            <div class="bubble right">{{ message }}</div>
          </div>
        </div>

        <div class="footer" v-if="activeChat">
          <form @submit="sendMessage">
            <div class="footer-input-wrap">
              <input type="text" class="form-control" placeholder="Write a message..." v-model="activeChat.message">
            </div>
            <button type="submit" class="btn-reset send-message">
              <span class="oi" data-glyph="location"></span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <svg height="0" width="0">
    <defs>
      <clipPath id="left-droplet">
        <path d="M 10,0 A 10,10 0 0 1 0,10 H 16 V 0 Z">
      </clipPath>
      <clipPath id="right-droplet">
        <path d="M 6,0 A 10,10 0 0 0 16,10 H 0 V 0 Z">
      </clipPath>
    </defs>
  </svg>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
